version: "3"

networks:
  go-networks:

services:
  go:
    build: ./go
    hostname: go-app
    container_name: go-app
    volumes:
      - ${APP_CODE_PATH_HOST}:/go/project
    environment: # 设置环境变量
      - TZ=${TZ}
    ports:
      - "8080:8080"
    stdin_open: true
    tty: true
    networks:
      - go-networks

  dtm:
    build:
      context: ./dtm
    hostname: dtm
    container_name: dtm
    environment:
      - TZ=${TZ}
    entrypoint:
      - "/app/dtm/dtm"
      - "-c=/app/dtm/configs/config.yaml"
    volumes:
      - ./dtm/config.yml:/app/dtm/configs/config.yaml
    ports:
      - "${DTM_HTTP_PORT}:36789"
      - "${DTM_GRPC_PORT}:36790"
    networks:
      - go-networks